/*!
 * 
 * Presto Player
 * 
 * @author Presto Made, Inc
 * @version 0.1.0
 * @link undefined
 * @license GPL
 * 
 * Copyright (c) 2022 Presto Made, Inc
 * 
 * This software is released under the GPL License
 * https://opensource.org/licenses/GPL
 * 
 * Compiled with the help of https://wpack.io
 * A zero setup Webpack Bundler Script for WordPress
 */
(window.wpackioprestoPlayersettingsJsonp=window.wpackioprestoPlayersettingsJsonp||[]).push([[0],{0:function(e,t){e.exports=window.wp.i18n},1:function(e,t){e.exports=window.wp.components},11:function(e,t){e.exports=window.wp.notices},12:function(e,t){e.exports=window.wp.compose},2:function(e,t){e.exports=window.wp.coreData},32:function(e,t){e.exports=window.wp.apiFetch},35:function(e,t,r){r(36),e.exports=r(51)},51:function(e,t,r){"use strict";r.r(t);var n=r(8),a=r(2),o=r(7),c=r(0);Object(o.dispatch)(a.store).addEntities([{name:"preset",kind:"presto-player",label:Object(c.__)("Presets","presto-player"),baseURL:"presto-player/v1/preset",baseURLParams:{context:"edit"}},{name:"audio-preset",kind:"presto-player",label:Object(c.__)("Audio Presets","presto-player"),baseURL:"presto-player/v1/audio-preset",baseURLParams:{context:"edit"}},{name:"webhook",kind:"presto-player",label:Object(c.__)("Webhook","presto-player"),baseURL:"presto-player/v1/webhook",baseURLParams:{context:"edit"}}]);var l=r(9),s=r(3),i=r(4),p=r.n(i),u=r(1),b=r(11),m=r(27),y=r(28),d=r(19),O=r(29),_=r(30),f=r(23),v=r(5),h=r(31),j=r.n(h);function g(e){return{path:e.pathname,hash:e.hash,query:j.a.parse(e.search)}}var E=r(34),R=Object(E.a)(),w=wp.element.createContext({route:g(R.location)}),P=r(16),k=wp.element.useContext,C="";function S(e){var t=e.path,r=e.onRoute,n=e.children,a=k(w).route,o=Object(P.a)("".concat(t))("".concat(a.hash.substr(1)));return o?(r&&(C!==o.path&&r(),C=o.path),React.createElement("div",null,wp.element.cloneElement(n,{route:o}))):null}var x=r(14),D=r.n(x);function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var T=wp.element.useContext;function B(e){var t=e.to,r=e.onClick,n=e.children,a=e.activeClassName,o=T(w).route,c=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){Object(v.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e);delete c.activeClassName;return React.createElement("a",Object.assign({},c,{className:D()(Object(v.a)({},a,Object(P.a)("".concat(t))("".concat(o.hash.substr(1)))),e.className),onClick:function(e){if(e.preventDefault(),o.path!==t){r&&r(e);var n=R.location.search;R.push("".concat(n,"#").concat(t))}}}),n)}function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(f.a)(e);if(t){var a=Object(f.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(_.a)(this,r)}}var I=function(e){Object(O.a)(r,e);var t=F(r);function r(e){var n;Object(m.a)(this,r),n=t.call(this,e),Object(v.a)(Object(d.a)(n),"handleRouteChange",(function(e){var t=g(null==e?void 0:e.location);n.setState({route:t})})),n.routes=Object.keys(e.routes).map((function(t){return e.routes[t].path})),n.unlisten=R.listen(n.handleRouteChange);var a=g(R.location),o=R.location.search;return n.state={route:a,defaultRoute:null!=e&&e.defaultRoute?"".concat(o,"#").concat(null==e?void 0:e.defaultRoute):"".concat(o,"#/")},n}return Object(y.a)(r,[{key:"componentWillUnmount",value:function(){this.unlisten()}},{key:"render",value:function(){var e=this.props,t=e.children,r=(e.NotFound,this.state),n=r.route,a=r.defaultRoute;if(!n.hash)return R.push(a),React.createElement("div",null);var o=!1;(this.routes||[]).forEach((function(e){var t=Object(P.a)(n.hash.substr(1))("".concat(n.hash.substr(1)));t&&(o={name:e,data:t})}));var c={route:n,matched:o},l=!o;return React.createElement(w.Provider,{value:c},l?React.createElement("div",null,"Not found"):t)}}]),r}(n.Component),A={general:{path:"general"},integrations:{path:"/integrations"},performance:{path:"/performance"}},L=r(33),M=["onSave","children","busy","loading"];function U(e){var t=e.onSave,r=e.children,n=e.busy,c=e.loading,l=Object(L.a)(e,M),s=Object(o.useSelect)((function(e){var t=e(a.store),r=t.__experimentalGetDirtyEntityRecords,n=t.isSavingEntityRecord,o=(r()||[]).filter((function(e){return"webhook"!==e.name}));return{isDirty:o.length>0,isSaving:o.some((function(e){return n(e.kind,e.name,e.key)}))}}),[]),i=s.isDirty,p=s.isSaving,b=!i||p;return c?React.createElement(ScSkeleton,{style:{width:"120px",height:"35px",display:"inline-block"}}):React.createElement(u.Button,Object.assign({isPrimary:!0,"aria-disabled":b,disabled:b||p||n,isBusy:p||n,onClick:b?void 0:t},l),r)}var q=function(e){var t=e.className,r=Object(o.useSelect)((function(e){return e(b.store).getNotices()})),n=Object(o.useDispatch)(b.store).removeNotice,a=r.filter((function(e){return"snackbar"===e.type}));return React.createElement(u.SnackbarList,{notices:a,className:t,onRemove:n})};function W(){var e=Object(o.useDispatch)(a.store).saveEditedEntityRecord;return{save:function(){var t=Object(l.a)(p.a.mark((function t(){var r,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Object(o.select)(a.store).__experimentalGetDirtyEntityRecords(),n=[],r.forEach((function(t){var r=t.kind,a=t.name,o=t.key;n.push(e(r,a,o,{throwOnError:!0}))})),t.next=5,Promise.all(n);case 5:if(!t.sent.some((function(e){return void 0===e}))){t.next=8;break}throw{message:"Saving failed."};case 8:return t.abrupt("return",!0);case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}}var Y,G=wp.i18n.__,z=wp.element.useState,H=wp.components,V=H.Modal,K=H.Button,J=function(e){var t=e.children,r=e.disabled,n=z(!1),a=Object(s.a)(n,2),o=a[0],c=a[1];return r?React.createElement("div",null,React.createElement("div",{className:"presto-options__disabled-overlay",onClick:function(e){return c(!0),e.preventDefault(),!1}},React.createElement("div",null,t)),!!o&&React.createElement(V,{title:null==r?void 0:r.title,onRequestClose:function(){return c(!1)}},React.createElement("h2",null,null==r?void 0:r.heading),React.createElement("p",null,null==r?void 0:r.message),React.createElement(K,{href:null==r?void 0:r.link,target:"_blank",isPrimary:!0},G("Learn More","presto-player")))):React.createElement("div",null,t)},Q=wp.components,X=Q.Card,Z=Q.CardBody,$=Q.CardFooter,ee=function(e){var t=e.title,r=e.description,n=e.children,a=e.disabled,s=e.hideSaveButton,i=W().save,u=Object(o.useDispatch)(b.store),m=u.createSuccessNotice,y=u.createErrorNotice,d=function(){var e=Object(l.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i();case 3:m(Object(c.__)("Settings Updated","presto-player"),{type:"snackbar"}),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0),y((null===e.t0||void 0===e.t0?void 0:e.t0.message)||Object(c.__)("Something went wrong","presto-player"));case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return React.createElement(J,{disabled:a},React.createElement(X,{size:"large",className:"presto-options__card"},React.createElement(Z,{className:"presto-options__card-body"},React.createElement("div",{className:"presto-flow",style:{"--presto-flow-space":"2em"}},React.createElement("div",{className:"presto-flow",style:{"--presto-flow-space":"1em"}},t&&React.createElement("h2",{style:{marginBottom:0}},t," ",!!a&&React.createElement("div",{className:"presto-options__pro-badge"},"Pro")),r&&React.createElement("p",null,r)),React.createElement("div",null,n))),s?React.createElement("br",null):React.createElement($,{isShady:!0},React.createElement("div",null,React.createElement(U,{onSave:d},Object(c.__)("Update Settings"))))))},te=wp.i18n.__,re=wp.components,ne=re.Button,ae=re.BaseControl,oe=wp.mediaUtils.MediaUpload,ce=(wp.data.dispatch,function(e){var t=e.option,r=e.label,n=e.help,a=e.allowedTypes,o=e.value,c=e.className,l=e.maxWidth,s=e.onSelect;return React.createElement("div",{className:D()(c,"presto-settings__setting is-media-control")},React.createElement(ae,{className:"editor-video-poster-control"},React.createElement(ae.VisualLabel,null,r),o&&React.createElement(ae,null,React.createElement("img",{style:{maxWidth:l,border:"1px solid #dcdcdc"},src:o})),React.createElement("br",null),React.createElement(oe,{title:n,onSelect:s,allowedTypes:a,render:function(e){var t=e.open;return React.createElement(ne,{isSecondary:!0,onClick:t,className:o?"button-replace":"button-select"},te(o?"Replace":"Select","presto-player"))}})," ",React.createElement("p",{id:"video-block__logo-image-description-".concat(null==t?void 0:t.id),hidden:!0},o?sprintf(te("The current logo image url is %s","presto-player"),o):te("There is no logo image currently selected","presto-player")),!!o&&React.createElement(ne,{onClick:function(){return s("")},isTertiary:!0},te("Remove","presto-player"))),React.createElement("br",null))}),le=function(e){var t=e.children,r=e.title,n=e.description;return React.createElement("div",{className:"presto-flow presto-settings__page"},React.createElement("div",{className:"presto-flow",style:{"--presto-flow-space":"1em"}},r&&React.createElement("h1",null,r),n&&React.createElement("p",null,n)),React.createElement("div",{className:"presto-settings__body "},React.createElement("div",{className:"presto-flow"},t)))},se=r(21),ie=r(6),pe=function(e){var t=e.option,r=e.value,a=e.className,o=e.disabled,c=e.onChange,l=function(e){o||(e.save(),c(s.current.value))},s=Object(n.useRef)();return Object(n.useEffect)((function(){var e;null!==(e=wp)&&void 0!==e&&e.CodeMirror&&wp.CodeMirror.fromTextArea(s.current,{type:"text/css",lineNumbers:!0}).on("change",l)}),[]),Object(ie.b)("div",{className:D()(a,"presto-settings__setting")},Object(ie.b)(u.BaseControl,{css:Object(ie.a)(Y||(Y=Object(se.a)(["\n          .CodeMirror {\n            height: 200px;\n            border: 1px solid #e3e3e3;\n            border-radius: 4px;\n          }\n        "]))),label:null==t?void 0:t.name,help:null==t?void 0:t.help},Object(ie.b)("textarea",{onChange:l,ref:s,rows:"5",disabled:!0},r)))};function ue(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function be(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(r),!0).forEach((function(t){Object(v.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ue(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var me,ye=function(){var e,t=function(){var e;return(null===(e=prestoPlayer)||void 0===e||!e.isPremium)&&{title:Object(c.__)("Pro Feature","presto-player"),heading:Object(c.__)("Unlock Presto Player Pro","presto-player"),message:Object(c.__)("Get this feature and more with the Pro version of Presto Player!","presto-player"),link:"https://prestoplayer.com"}},r=Object(o.useSelect)((function(e){var t,r,n=["presto-player","preset"],o=["presto-player","audio-preset"];return{presets:(t=e(a.store)).getEntityRecords.apply(t,n),loadingPresets:e(a.store).isResolving("getEntityRecords",n),audioPresets:(r=e(a.store)).getEntityRecords.apply(r,o),loadingAudioPresets:e(a.store).isResolving("getEntityRecords",o)}}),[]),n=r.presets,l=r.loadingPresets,i=r.audioPresets,p=r.loadingAudioPresets,b=Object(a.useEntityProp)("root","site","presto_player_presets"),m=Object(s.a)(b,2),y=m[0],d=m[1],O=Object(a.useEntityProp)("root","site","presto_player_audio_presets"),_=Object(s.a)(O,2),f=_[0],v=_[1],h=Object(a.useEntityProp)("root","site","presto_player_analytics"),j=Object(s.a)(h,2),g=j[0],E=j[1],R=function(e){E(be(be({},g||{}),e))},w=Object(a.useEntityProp)("root","site","presto_player_branding"),P=Object(s.a)(w,2),k=P[0],C=P[1],S=function(e){C(be(be({},k||{}),e))},x=Object(a.useEntityProp)("root","site","presto_player_uninstall"),D=Object(s.a)(x,2),N=D[0],T=D[1];return React.createElement(le,{title:Object(c.__)("General","presto-player"),description:Object(c.__)("Branding, analytics and uninstall data.","presto-player")},React.createElement(ee,{title:Object(c.__)("Branding","presto-player"),description:Object(c.__)("Global player branding options","presto-player")},React.createElement(J,{disabled:t()},React.createElement(ce,{className:"presto-player__setting--logo",label:React.createElement(React.Fragment,null,Object(c.__)("Logo","presto-player")," ",t()&&React.createElement("span",{className:"presto-options__pro-badge"},Object(c.__)("Pro","presto-player"))),onSelect:function(e){return S({logo:null==e?void 0:e.url})},maxWidth:(null==k?void 0:k.logo_width)||150,value:null==k?void 0:k.logo}),React.createElement("div",{style:{maxWidth:"500px"}},React.createElement(u.RangeControl,{className:"presto-player__setting--logo-width",label:Object(c.__)("Logo Max Width","presto-player"),value:(null==k?void 0:k.logo_width)||150,onChange:function(e){return S({logo_width:e})},min:1,max:400}))),React.createElement(u.ColorPicker,{className:"presto-player__setting--brand-color",onChangeComplete:function(e){return S({color:e.hex})},color:null==k?void 0:k.color})),React.createElement(ee,{title:Object(c.__)("Analytics","presto-player"),disabled:t(),description:Object(c.__)("Analytics settings for media plays, watch times and more.","presto-player")},React.createElement("div",null,React.createElement(u.ToggleControl,{className:"presto-player__setting--analytics-enable",label:Object(c.__)("Enable","presto-player"),help:Object(c.__)("Enable view analytics for your media","presto-player"),checked:null==g?void 0:g.enable,onChange:function(e){return R({enable:e})}}),!(null==g||!g.enable)&&React.createElement(u.ToggleControl,{label:Object(c.__)("Auto-Purge Data (recommended)"),help:Object(c.__)("Automatically purge data older than 90 days.","presto-player"),className:"presto-player__setting--analytics-enable",checked:void 0===(null==g?void 0:g.purge_data)||(null==g?void 0:g.purge_data),onChange:function(e){return R({purge_data:e})}}))),React.createElement(ee,{title:Object(c.__)("Presets","presto-player"),disabled:t(),description:Object(c.__)("Media presets settings.","presto-player")},l?React.createElement(u.Spinner,null):React.createElement(u.ComboboxControl,{label:Object(c.__)("Select default preset for video.","presto-player"),value:null==y?void 0:y.default_player_preset,options:(n||[]).map((function(e){return{value:null==e?void 0:e.id,label:null==e?void 0:e.name}})),onChange:function(e){return t={default_player_preset:e||1},void d(be(be({},y||{}),t));var t}}),p?React.createElement(u.Spinner,null):React.createElement(u.ComboboxControl,{label:Object(c.__)("Select default preset for audio.","presto-player"),value:null==f?void 0:f.default_player_preset,options:(i||[]).map((function(e){return{value:null==e?void 0:e.id,label:null==e?void 0:e.name}})),onChange:function(e){return t={default_player_preset:e||1},void v(be(be({},f||{}),t));var t}})),React.createElement(ee,{disabled:t(),title:Object(c.__)("Custom CSS","presto-player"),description:Object(c.__)("Quickly add custom css to the player web component.","presto-player")},React.createElement(pe,{disabled:!(null!==(e=prestoPlayer)&&void 0!==e&&e.isPremium),option:{id:"player_css"},value:null==k?void 0:k.player_css,key:null==k?void 0:k.player_css,onChange:function(e){return S({player_css:e})}})),React.createElement(ee,{title:Object(c.__)("Uninstall Options","presto-player"),description:Object(c.__)("Options to remove data on uninstall.","presto-player")},React.createElement(u.ToggleControl,{label:Object(c.__)("Remove data on uninstall"),help:Object(c.__)("This removes all data on uninstall.","presto-player"),className:"presto-player__setting--uninstall",checked:null==N?void 0:N.uninstall_data,onChange:function(e){var t;if(e&&!confirm(Object(c.__)("Caution: Data Loss. Are you sure you want to remove all the data from this plugin? This is irreversible!","presto-player")))return;t={uninstall_data:e},T(be(be({},N||{}),t))}})))};function de(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Oe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?de(Object(r),!0).forEach((function(t){Object(v.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):de(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var _e=function(){var e=Object(a.useEntityProp)("root","site","presto_player_performance"),t=Object(s.a)(e,2),r=t[0],n=t[1],o=function(e){n(Oe(Oe({},r||{}),e))};return Object(ie.b)(le,{title:Object(c.__)("Performance","presto-player"),description:Object(c.__)("Player performance preferences.","presto-player")},Object(ie.b)(ee,{title:Object(c.__)("Performance","presto-player"),description:Object(c.__)("Performance options for player loading.","presto-player")},Object(ie.b)("div",null,Object(ie.b)(u.ToggleControl,{className:"presto-player__setting--module-enabled",label:Object(c.__)("Dynamically Load JavaScript","presto-player"),help:Object(c.__)("Dynamically load javascript modules on the page which can significantly reduce javascript size and increase performance.","presto-player"),checked:null==r?void 0:r.module_enabled,onChange:function(e){return o({module_enabled:e})}}),!(null==r||!r.module_enabled)&&Object(ie.b)(u.Notice,{css:Object(ie.a)(me||(me=Object(se.a)(["\n                background: #f3f4f5 !important;\n                margin-bottom: 20px !important;\n              "]))),className:"presto-notice",status:"info",isDismissible:!1},Object(ie.b)("div",null,Object(ie.b)("strong",null,Object(c.__)("Please Note","presto-player"))),Object(ie.b)("div",null,Object(c.__)("You may need to exclude the player script from combining, as well as enable CORS requests for some CDNs.","presto-player")," ",Object(ie.b)(u.ExternalLink,{href:"https://prestoplayer.com/docs/performance-preferences-explained#global-player-performance-setting"},Object(c.__)("Learn More","presto-player"))))),Object(ie.b)(u.ToggleControl,{className:"presto-player__setting--automations",label:Object(c.__)("Enable Ajax Requests for Progress Integrations","presto-player"),help:Object(c.__)("Keep this on unless you do not plan on using automation, LMS or membership integrations.","presto-player"),checked:null==r?void 0:r.automations,onChange:function(e){return o({automations:e})}})))};function fe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ve(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(r),!0).forEach((function(t){Object(v.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var he=function(){var e=Object(a.useEntityProp)("root","site","presto_player_bunny_pull_zones"),t=Object(s.a)(e,2),r=t[0],n=t[1],o=function(e){n(ve(ve({},r||{}),e))},l=r||{},i=l.public_id,p=l.public_hostname,b=l.private_id,m=l.private_hostname,y=l.private_security_key;return React.createElement(React.Fragment,null,React.createElement("h2",{style:{marginTop:"40px"}},Object(c.__)("Bunny.net Storage (Classic)","presto-player")),React.createElement("p",{style:{fontSize:"12px",color:"#757575"}},Object(c.__)('Note: To Change your API key, please click "Reconnect" from a bunny block.',"presto-player")),React.createElement(u.TextControl,{label:Object(c.__)("Public ID","presto-player"),help:Object(c.__)("The ID of the public pull zone to use.","presto-player"),value:i,onChange:function(e){return o({public_id:e})}}),React.createElement(u.TextControl,{label:Object(c.__)("Public Host Name","presto-player"),help:Object(c.__)("The hostname to use for this pullzone.","presto-player"),value:p,onChange:function(e){return o({public_hostname:e})}}),React.createElement(u.TextControl,{label:Object(c.__)("Private ID","presto-player"),help:Object(c.__)("The ID of the private pull zone to use.","presto-player"),value:b,onChange:function(e){return o({private_id:e})}}),React.createElement(u.TextControl,{label:Object(c.__)("Private Host Name","presto-player"),help:Object(c.__)("The hostname to use for the private pullzone.","presto-player"),value:m,onChange:function(e){return o({private_hostname:e})}}),React.createElement(u.TextControl,{label:Object(c.__)("Private Url Token Authentication Key","presto-player"),help:Object(c.__)("Update the security token used to sign private urls.","presto-player"),type:"password",value:y,onChange:function(e){return o({private_security_key:e})}}))};function je(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ge(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?je(Object(r),!0).forEach((function(t){Object(v.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):je(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ee=function(){var e=Object(a.useEntityProp)("root","site","presto_player_bunny_stream_public"),t=Object(s.a)(e,2),r=t[0],n=t[1],o=function(e){n(ge(ge({},r||{}),e))},l=r||{},i=l.video_library_api_key,p=l.pull_zone_url,b=l.video_library_id;return React.createElement(React.Fragment,null,React.createElement(u.TextControl,{label:Object(c.__)("Public Stream Library ID","presto-player"),help:Object(c.__)("The ID of the video library to use.","presto-player"),value:b,onChange:function(e){return o({video_library_id:e})}}),React.createElement(u.TextControl,{label:Object(c.__)("Public Stream Library API Key","presto-player"),help:Object(c.__)("The API key for the above video library for read/write access.","presto-player"),value:i,onChange:function(e){return o({video_library_api_key:e})}}),React.createElement(u.TextControl,{label:Object(c.__)("Public Stream CDN Hostname","presto-player"),help:Object(c.__)("The public cdn hostname for the video library.","presto-player"),value:p,onChange:function(e){return o({pull_zone_url:e})}}))};function Re(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function we(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Re(Object(r),!0).forEach((function(t){Object(v.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Re(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Pe=function(){var e=Object(a.useEntityProp)("root","site","presto_player_bunny_stream_private"),t=Object(s.a)(e,2),r=t[0],n=t[1],o=function(e){n(we(we({},r||{}),e))},l=r||{},i=l.video_library_api_key,p=l.pull_zone_url,b=l.video_library_id,m=l.token_auth_key;return React.createElement(React.Fragment,null,React.createElement(u.TextControl,{label:Object(c.__)("Private Stream Library ID","presto-player"),help:Object(c.__)("The ID of the video library to use.","presto-player"),value:b,onChange:function(e){return o({video_library_id:e})}}),React.createElement(u.TextControl,{label:Object(c.__)("Private Stream Library API Key","presto-player"),help:Object(c.__)("The API key for the above video library for read/write access.","presto-player"),value:i,onChange:function(e){return o({video_library_api_key:e})}}),React.createElement(u.TextControl,{label:Object(c.__)("Private Stream CDN Hostname","presto-player"),help:Object(c.__)("The public cdn hostname for the video library.","presto-player"),value:p,onChange:function(e){return o({pull_zone_url:e})}}),React.createElement(u.TextControl,{label:Object(c.__)("Private Stream Token Authentication Key","presto-player"),help:Object(c.__)("The token authentication key used to sign private urls.","presto-player"),value:m,onChange:function(e){return o({token_auth_key:e})}}))},ke=function(){var e=Object(a.useEntityProp)("root","site","presto_player_bunny_stream_public"),t=Object(s.a)(e,2),r=t[0];t[1];return r?React.createElement(React.Fragment,null,React.createElement("h2",{style:{marginTop:"40px"}},Object(c.__)("Bunny.net Stream","presto-player")),React.createElement(Ee,null),React.createElement(Pe,null)):null},Ce=wp.i18n.__,Se=wp.components,xe=Se.Button,De=Se.Panel,Ne=Se.PanelBody,Te=Se.Flex,Be=Se.FlexBlock,Fe=Se.Notice,Ie=Se.Spinner,Ae=wp.element,Le=Ae.useState,Me=Ae.useEffect,Ue=function(){var e=Le(0),t=Object(s.a)(e,2),r=t[0],n=t[1],a=Le(0),o=Object(s.a)(a,2),c=o[0],i=o[1],u=Le(""),b=Object(s.a)(u,2),m=b[0],y=b[1],d=Le(0),O=Object(s.a)(d,2),_=O[0],f=O[1],v=function(){var e=Object(l.a)(p.a.mark((function e(){var t,a,o,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(""),e.prev=1,e.next=4,wp.apiFetch({path:"/presto-player/v1/email/export",method:"post",data:{step:r}});case 4:t=e.sent,a=t.percentage,o=t.step,c=t.url,n(o),i(a),f(c),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),i(0),y((null===e.t0||void 0===e.t0?void 0:e.t0.message)||Ce("Something went wrong","presto-player"));case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(){return e.apply(this,arguments)}}();return Me((function(){r&&"done"!=r&&v()}),[r]),Me((function(){_&&window.open(_)}),[_]),React.createElement(De,null,React.createElement(Ne,{title:React.createElement(Te,null,React.createElement(Be,null,Ce("Other","presto-player"))),initialOpen:!1},React.createElement("h2",null,Ce("Manual Export","presto-player")),React.createElement("p",null,Ce("Using a service not listed here? You can export contacts and manually upload them to a service.","presto-player")),m&&React.createElement(Fe,{className:"presto-notice",status:"error",onRemove:function(){return y("")}},m),React.createElement(Te,{align:"center",justify:"flex-start"},React.createElement(xe,{isPrimary:!0,onClick:function(e){n(1),i(1),e.preventDefault()}},Ce("Download CSV File","presto-player")),!!c&&React.createElement("div",{style:{display:"flex",alignItems:"center"}},React.createElement(Ie,{style:{marginTop:0}}),React.createElement("span",null,"Exporting... ",c,"% Complete")))))},qe=wp.components,We=qe.Button,Ye=qe.Card,Ge=qe.CardBody,ze=(wp.data.dispatch,function(e){var t,r,n,a=e.option,o=(e.value,e.optionName,e.className);return React.createElement(Ye,{isBorderless:!0,className:o},React.createElement(Ge,{isShady:!0},!(null==a||!a.name)&&React.createElement("h2",null,a.name),!!a.help&&React.createElement("p",null,a.help),!(null==a||null===(t=a.button)||void 0===t||!t.text)&&React.createElement(We,{isPrimary:!0,target:null==a||null===(r=a.button)||void 0===r?void 0:r.target,href:null==a||null===(n=a.button)||void 0===n?void 0:n.link},a.button.text)))}),He=r(12),Ve=wp.i18n.__,Ke=wp.components,Je=Ke.Button,Qe=Ke.Panel,Xe=Ke.PanelBody,Ze=Ke.Flex,$e=Ke.Modal,et=Ke.FlexBlock,tt=Ke.FlexItem,rt=Ke.PanelRow,nt=wp.element.useState,at=function(e){var t=e.connected,r=e.title,n=e.children,a=e.onConnect,o=e.isBusy,c=e.connectButtonText,l=e.disconnectButtonText,i=e.onDisconnect,p=nt(!1),u=Object(s.a)(p,2),b=u[0],m=u[1];return React.createElement(Qe,null,React.createElement(Xe,{title:React.createElement(Ze,null,React.createElement(et,null,r),React.createElement(tt,null,t?React.createElement(Je,{isSmall:!0,isPrimary:!0,style:{marginRight:"30px"}},Ve("Connected","presto-player")):React.createElement(Je,{isSmall:!0,isSecondary:!0,style:{marginRight:"30px"}},Ve("Not Connected","presto-player")))),initialOpen:!1},React.createElement("form",{onSubmit:function(e){e.preventDefault(),a()},disabled:o},n,React.createElement(rt,null,React.createElement("div",null,t?React.createElement("div",null," ",React.createElement(Je,{isSecondary:!0,isBusy:o,disabled:o,onClick:function(e){e.preventDefault(),m(!0)}},l||Ve("Disconnect","presto-player"))):React.createElement(Je,{isPrimary:!0,isBusy:o,disabled:o,type:"submit"},c||Ve("Connect","presto-player")))))),b&&React.createElement($e,{className:"presto-player__modal-confirm",title:Ve("Are you sure?","presto-player"),style:{"max-width":"350px"},onRequestClose:function(){return m(!1)}},React.createElement("p",null,Ve("Are you sure you want to disconnect this integration?","presto-player")),React.createElement(Je,{className:"presto-player__modal-confirm-button",isDestructive:!0,onClick:function(){i&&i(),m(!1)}},Ve("Disconnect","presto-player")),React.createElement(Je,{onClick:function(){return m(!1)}},Ve("Cancel","presto-player"))))},ot=wp.components.TextControl,ct=wp.data.dispatch,lt=function(e){var t=e.option,r=e.value,n=e.optionName,a=e.className;return React.createElement("div",{className:"presto-settings__setting is-text-control"},React.createElement(ot,Object.assign({className:D()(a,"presto-settings__setting is-media-control"),label:null==t?void 0:t.name,value:r,type:null==t?void 0:t.type,help:null==t?void 0:t.help,placeholder:null==t?void 0:t.placeholder,onChange:function(e){return ct("presto-player/settings").updateSetting(t.id,e,n)}},e)))},st=r(32),it=r.n(st);function pt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ut(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pt(Object(r),!0).forEach((function(t){Object(v.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var bt=function(e){var t=e.name;return Object(He.createHigherOrderComponent)((function(e){return function(r){var o=Object(n.useState)(""),i=Object(s.a)(o,2),u=i[0],b=i[1],m=Object(n.useState)(""),y=Object(s.a)(m,2),d=y[0],O=y[1],_=Object(n.useState)(!1),f=Object(s.a)(_,2),v=f[0],h=f[1],j=Object(a.useEntityProp)("root","site",t),g=Object(s.a)(j,2),E=g[0],R=g[1],w=function(){var e=Object(l.a)(p.a.mark((function e(t){var r,n,a,o,l,s,i,u;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.path,n=t.data,a=void 0===n?{}:n,o=t.message,l=void 0===o?Object(c.__)("Success","presto-player"):o,s=t.success,i=t.error,b(""),O(""),h(!0),e.prev=4,e.next=7,it()({path:r,method:"post",data:a});case 7:u=e.sent,s&&s(u),O(l),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),null!==e.t0&&void 0!==e.t0&&e.t0.message&&(b(e.t0.message),i&&i(e.t0));case 15:return e.prev=15,h(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[4,12,15,18]])})));return function(t){return e.apply(this,arguments)}}();return React.createElement(e,Object.assign({success:d,setSuccess:O,setError:b,error:u,isBusy:v,setting:E,updateSetting:function(e){R(ut(ut({},E||{}),e))},makeRequest:w},r))}}),"withIntegration")};function mt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var yt=Object(He.compose)([bt({name:"presto_player_activecampaign"})])((function(e){var t=e.success,r=e.setSuccess,n=e.error,a=e.setError,o=e.isBusy,s=e.makeRequest,i=e.setting,b=e.updateSetting,m=function(e){b(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mt(Object(r),!0).forEach((function(t){Object(v.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e))},y=function(){var e=Object(l.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s({path:"/presto-player/v1/activecampaign/disconnect",message:Object(c.__)("Disconnected","presto-player"),success:m,error:m});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return React.createElement(at,{title:Object(c.__)("ActiveCampaign"),connected:null==i?void 0:i.connected,onConnect:function(){s({path:"/presto-player/v1/activecampaign/connect",data:{api_key:null==i?void 0:i.api_key,url:null==i?void 0:i.url},message:Object(c.__)("Connected","presto-player"),success:m,error:m})},onDisconnect:y,isBusy:o},n&&React.createElement(u.PanelRow,null,React.createElement(u.Notice,{className:"presto-notice",status:"error",onRemove:function(){return a("")}},n)),t&&React.createElement(u.PanelRow,null,React.createElement(u.Notice,{className:"presto-notice",status:"success",onRemove:function(){return r("")}},t)),React.createElement(u.PanelRow,null,React.createElement(u.BaseControl,null,React.createElement(lt,{label:Object(c.__)("Your ActiveCampaign Url","presto-player"),type:"url",help:Object(c.__)("You can find this on your Settings > Developer page.","presto-player"),value:null==i?void 0:i.url,onChange:function(e){return b({url:e})}}),React.createElement(lt,{label:Object(c.__)("Your ActiveCampaign API key","presto-player"),help:Object(c.__)("You can find this on your Settings > Developer page.","presto-player"),value:null==i?void 0:i.api_key,onChange:function(e){return b({api_key:e})}}))))}));function dt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var Ot=Object(He.compose)([bt({name:"presto_player_fluentcrm"})])((function(e){var t=e.error,r=e.setError,n=e.isBusy,a=e.makeRequest,o=e.setting,s=e.updateSetting,i=function(e){s(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dt(Object(r),!0).forEach((function(t){Object(v.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e))},b=(o||{}).connected,m=function(){var e=Object(l.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a({path:"/presto-player/v1/fluentcrm/disconnect",message:Object(c.__)("Deactivated","presto-player"),success:i,error:i});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return React.createElement(at,{title:Object(c.__)("FluentCRM"),connected:b,onConnect:function(){a({path:"/presto-player/v1/fluentcrm/connect",message:Object(c.__)("Installed and connected","presto-player"),success:i,error:i})},onDisconnect:m,connectButtonText:Object(c.__)("Install FluentCRM Plugin","presto-player"),disconnectButtonText:Object(c.__)("Deactivate FluentCRM Plugin","presto-player"),isBusy:n},t&&React.createElement(u.PanelRow,null,React.createElement(u.Notice,{className:"presto-notice",status:"error",onRemove:function(){return r("")}},t)),b&&React.createElement(u.PanelRow,null,React.createElement(u.Notice,{className:"presto-notice",status:"success",isDismissible:!1},Object(c.__)("Installed and connected!","presto-player"))))}));function _t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var ft=Object(He.compose)([bt({name:"presto_player_mailchimp"})])((function(e){var t=e.success,r=e.setSuccess,n=e.error,a=e.setError,o=e.isBusy,s=e.makeRequest,i=e.setting,b=e.updateSetting,m=i||{},y=m.api_key,d=m.connected,O=function(e){b(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_t(Object(r),!0).forEach((function(t){Object(v.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_t(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e))},_=function(){var e=Object(l.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s({path:"/presto-player/v1/mailchimp/disconnect",message:Object(c.__)("Disconnected","presto-player"),success:O,error:O});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return React.createElement(at,{title:Object(c.__)("Mailchimp"),connected:d,onDisconnect:_,onConnect:function(){s({path:"/presto-player/v1/mailchimp/connect",data:{api_key:y},message:Object(c.__)("Connected","presto-player"),success:O,error:O})},isBusy:o},n&&React.createElement(u.PanelRow,null,React.createElement(u.Notice,{className:"presto-notice",status:"error",onRemove:function(){return a("")}},n)),t&&React.createElement(u.PanelRow,null,React.createElement(u.Notice,{className:"presto-notice",status:"success",onRemove:function(){return r("")}},t)),React.createElement(u.PanelRow,null,React.createElement(u.BaseControl,null,React.createElement(lt,{className:"presto-player__setting--mailchimp-api_key",label:Object(c.__)("Your Mailchimp API key","presto-player"),help:React.createElement("p",null,Object(c.__)("You can create a new key on your mailchimp account page.","presto-player")," ",React.createElement(u.ExternalLink,{href:"https://us11.admin.mailchimp.com/account/api/"},Object(c.__)("Get My API Key","presto-player"))),value:y,onChange:function(e){return b({api_key:e})}}))))}));function vt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var ht=Object(He.compose)([bt({name:"presto_player_mailerlite"})])((function(e){var t=e.success,r=e.setSuccess,n=e.error,a=e.setError,o=e.isBusy,s=e.makeRequest,i=e.setting,b=e.updateSetting,m=i||{},y=m.api_key,d=m.connected,O=function(e){b(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vt(Object(r),!0).forEach((function(t){Object(v.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e))},_=function(){var e=Object(l.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s({path:"/presto-player/v1/mailerlite/disconnect",message:Object(c.__)("Disconnected","presto-player"),success:O,error:O});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return React.createElement(at,{title:Object(c.__)("Mailerlite"),connected:d,onDisconnect:_,onConnect:function(){s({path:"/presto-player/v1/mailerlite/connect",data:{api_key:y},message:Object(c.__)("Connected","presto-player"),success:O,error:O})},isBusy:o},n&&React.createElement(u.PanelRow,null,React.createElement(u.Notice,{className:"presto-notice",status:"error",onRemove:function(){return a("")}},n)),t&&React.createElement(u.PanelRow,null,React.createElement(u.Notice,{className:"presto-notice",status:"success",onRemove:function(){return r("")}},t)),React.createElement(u.PanelRow,null,React.createElement(u.BaseControl,null,React.createElement(lt,{className:"presto-player__setting--mailerlite-api_key",label:Object(c.__)("Your MailerLite API key","presto-player"),help:React.createElement("p",null,Object(c.__)("You can create a new key on your MailerLite account page.","presto-player")," ",React.createElement(u.ExternalLink,{href:"https://app.mailerlite.com/integrations/api/"},Object(c.__)("Get My API Key","presto-player"))),value:y,onChange:function(e){return b({api_key:e})}}))))})),jt=r(22);function gt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Et(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gt(Object(r),!0).forEach((function(t){Object(v.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Rt=function(e){var t=e.headers,r=e.setHeaders,n=function(e,n){r((t||[]).map((function(t,r){return r!==n?t:Et(Et({},t),e)})))};return React.createElement(React.Fragment,null,(t||[]).map((function(e,a){var o=e.name,l=e.value;return React.createElement(u.Flex,{key:a,align:"center"},React.createElement(u.TextControl,{placeholder:Object(c.__)("Header Name","presto-player"),value:o,onChange:function(e){return n({name:e},a)}}),React.createElement(u.TextControl,{placeholder:Object(c.__)("New Value","presto-player"),value:l,onChange:function(e){return n({value:e},a)}}),React.createElement(u.BaseControl,null,React.createElement(u.ToolbarButton,{icon:"trash",onClick:function(){return function(e){return r((t||[]).filter((function(t,r){return r!==e})))}(a)}})))})),React.createElement("div",null,React.createElement(u.Button,{isSecondary:!0,isSmall:!0,onClick:function(){return e={name:"",value:""},void r([].concat(Object(jt.a)(t||[]),[e]));var e}},Object(c.__)("Add Header","presto-player"))))};function wt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wt(Object(r),!0).forEach((function(t){Object(v.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var kt=function(e){var t=e.onClose,r=e.webhook,i=Object(o.useDispatch)(a.store).saveEntityRecord,m=Object(o.useDispatch)(b.store),y=m.createSuccessNotice,d=m.createErrorNotice,O=Object(n.useState)(!1),_=Object(s.a)(O,2),f=_[0],v=_[1],h=Object(n.useState)(r||{email_name:"email",method:"POST"}),j=Object(s.a)(h,2),g=j[0],E=j[1],R=function(e){E(Pt(Pt({},g||{}),e))},w=g.name,P=g.url,k=g.method,C=g.email_name,S=g.headers,x=(g.archived,function(){var e=Object(l.a)(p.a.mark((function e(r){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r.preventDefault(),v(!0),e.next=5,i("presto-player","webhook",Pt({},g));case 5:y(null!=g&&g.id?Object(c.__)("Webhook updated","presto-player"):Object(c.__)("Webhook created.","presto-player"),{type:"snackbar"}),t(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0),d((null===e.t0||void 0===e.t0?void 0:e.t0.message)||Object(c.__)("Something went wrong.","presto-player"),{type:"snackbar"});case 13:return e.prev=13,v(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,9,13,16]])})));return function(t){return e.apply(this,arguments)}}());return Object(ie.b)(u.Modal,{title:null!=g&&g.id?Object(c.__)("Edit Webhook","presto-player"):Object(c.__)("Add A Webhook","presto-player"),onRequestClose:t,shouldCloseOnClickOutside:!1},Object(ie.b)("form",{onSubmit:x},Object(ie.b)(u.TextControl,{label:Object(c.__)("Name","presto-player"),placeholder:Object(c.__)("Webhook feed name","presto-player"),value:w,onChange:function(e){return R({name:e})},required:!0,autoFocus:!0}),Object(ie.b)(u.TextControl,{label:Object(c.__)("Request URL","presto-player"),placeholder:Object(c.__)("Webhook URL","presto-player"),type:"url",value:P,onChange:function(e){return R({url:e})},required:!0}),Object(ie.b)(u.SelectControl,{label:Object(c.__)("Request Method","presto-player"),value:k,options:[{label:"GET",value:"GET"},{label:"POST",value:"POST"},{label:"PUT",value:"PUT"}],onChange:function(e){return R({method:e})},required:!0}),Object(ie.b)(u.TextControl,{label:Object(c.__)("Email Name","presto-player"),placeholder:Object(c.__)("The name (key) of the email sent.","presto-player"),value:C,onChange:function(e){return R({email_name:e})},required:!0}),Object(ie.b)("div",{css:{margin:"0 0 1.5rem"}},Object(ie.b)(u.BaseControl.VisualLabel,null,Object(c.__)("Headers","presto-player")),Object(ie.b)(Rt,{headers:S,setHeaders:function(e){return R({headers:e})}})),Object(ie.b)(u.Button,{isPrimary:!0,type:"submit",isBusy:f},null!=g&&g.id?Object(c.__)("Update","presto-player"):Object(c.__)("Create","presto-player"))))},Ct=function(e){var t=e.webhook,r=Object(n.useState)(!1),i=Object(s.a)(r,2),m=(i[0],i[1],Object(n.useState)(!1)),y=Object(s.a)(m,2),d=y[0],O=y[1],_=Object(o.useDispatch)(a.store),f=_.deleteEntityRecord,v=(_.saveEntityRecord,Object(o.useDispatch)(b.store)),h=v.createSuccessNotice,j=v.createErrorNotice,g=Object(o.useSelect)((function(e){var r=["presto-player","webhook",null==t?void 0:t.id],n=e(a.store),o=n.getEditedEntityRecord,c=n.isSavingEntityRecord,l=n.isDeletingEntityRecord;return{webhook:o.apply(void 0,r),loading:e(a.store).isResolving("getEditedEntityRecord",r),isSaving:c.apply(void 0,r),isDeleting:l.apply(void 0,r)}}),[]),E=g.webhook,R=g.loading,w=g.isSaving,P=g.isDeleting,k=E||{},C=k.name,S=k.url,x=function(){var e=Object(l.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,confirm(Object(c.__)("Are you sure you want to delete this webhook?","presto-player"))){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,f("presto-player","webhook",null==E?void 0:E.id,void 0,{throwOnError:!0});case 6:h(Object(c.__)("Webhook deleted.","presto-player"),{type:"snackbar"}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0),j((null===e.t0||void 0===e.t0?void 0:e.t0.message)||Object(c.__)("Something went wrong","presto-player"),{type:"snackbar"});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return R?React.createElement(u.Spinner,null):React.createElement(u.Card,null,React.createElement(u.CardBody,null,React.createElement(u.Flex,{align:"center"},React.createElement(u.FlexBlock,null,React.createElement("strong",null,C||Object(c.__)("Untitled webhook","presto-player")),React.createElement("br",null),S),React.createElement(u.FlexItem,null,React.createElement(u.Flex,{align:"center"},w||P?React.createElement(u.Spinner,null):React.createElement(React.Fragment,null,React.createElement(u.ToolbarButton,{icon:"edit",label:"Edit",onClick:function(){return O(!0)}}),React.createElement(u.ToolbarButton,{icon:"trash",label:Object(c.__)("Delete","presto-player"),onClick:x})))))),d&&React.createElement(kt,{onClose:function(){return O(!1)},webhook:t}))},St=function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),r=t[0],l=t[1],i=Object(o.useSelect)((function(e){var t,r=["presto-player","webhook"];return{webhooks:(t=e(a.store)).getEntityRecords.apply(t,r),loading:e(a.store).isResolving("getEntityRecords",r)}}),[]),p=i.webhooks,b=i.loading;return React.createElement(u.Panel,null,React.createElement(u.PanelBody,{title:React.createElement(u.Flex,null,React.createElement(u.FlexBlock,null,Object(c.__)("Webhooks","presto-player")),!(null==p||!p.length)&&React.createElement(u.Button,{isSmall:!0,isPrimary:!0,style:{marginRight:"30px"}},Object(c.sprintf)(Object(c.__)("%d connected"),null==p?void 0:p.length))),initialOpen:!1},(p||[]).map((function(e){return React.createElement(Ct,{webhook:e,key:null==e?void 0:e.id,loading:b})})),React.createElement("br",null),React.createElement(u.Button,{isSecondary:!0,onClick:function(){l(!0)}},Object(c.__)("Create New WebHook","presto-player")),r&&React.createElement(kt,{onClose:function(){return l(!1)}})))};function xt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Dt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xt(Object(r),!0).forEach((function(t){Object(v.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Nt=r(43),Tt=function(){var e,t,r,o,l,i,p,b,m,y,d,O,_=Object(n.useState)(!1),f=Object(s.a)(_,2),v=f[0],h=f[1],j=Object(a.useEntityProp)("root","site","presto_player_bunny_stream"),g=Object(s.a)(j,2),E=g[0],R=g[1],w=function(e){R(Dt(Dt({},E||{}),e))},P=Object(a.useEntityProp)("root","site","presto_player_google_analytics"),k=Object(s.a)(P,2),C=k[0],S=k[1],x=function(e){S(Dt(Dt({},C||{}),e))},D=Object(a.useEntityProp)("root","site","presto_player_youtube"),N=Object(s.a)(D,2),T=N[0],B=N[1],F=function(e){B(Dt(Dt({},T||{}),e))},I=function(){var e;return(null===(e=prestoPlayer)||void 0===e||!e.isPremium)&&{title:Object(c.__)("Pro Feature","presto-player"),heading:Object(c.__)("Unlock Presto Player Pro","presto-player"),message:Object(c.__)("Get this feature and more with the Pro version of Presto Player!","presto-player"),link:"https://prestoplayer.com"}};return React.createElement(le,{title:Object(c.__)("Integrations","presto-player"),description:Object(c.__)("Third party integrations and connections.","presto-player")},React.createElement(ee,{title:Object(c.__)("Google Analytics","presto-player"),description:Object(c.__)("Analytics settings for media plays, watch times and more.","presto-player"),disabled:I()},React.createElement(u.ToggleControl,{className:"presto-player__setting--google-analytics",label:Object(c.__)("Enable","presto-player"),help:Object(c.__)("Send analytics events to your Google Analytics account.","presto-player"),checked:null==C?void 0:C.enable,onChange:function(e){return x({enable:e})}}),React.createElement(u.ToggleControl,{className:"presto-player__setting--use-existing-tag",label:Object(c.__)("Use existing on-page tag?","presto-player"),help:Object(c.__)("Should we use an existing google analytics (v4) tag? If not, we'll output one for you.","presto-player"),checked:null==C?void 0:C.use_existing_tag,onChange:function(e){return x({use_existing_tag:e})}}),React.createElement(u.TextControl,{label:Object(c.__)("Measurement ID","presto-player"),help:Object(c.__)("Enter a Google Analytics Measurement ID, which can be found on your analytics admin page.","presto-player"),value:null==C?void 0:C.measurement_id,onChange:function(e){return x({measurement_id:e})}})),React.createElement(ee,{title:Object(c.__)("YouTube","presto-player"),description:Object(c.__)("Settings for YouTube videos.","presto-player")},React.createElement(u.ToggleControl,{className:"presto-player__setting--youtube-nocookie",label:Object(c.__)("Privacy-Enhanced Mode","presto-player"),help:Object(c.__)("Embed YouTube videos without using cookies that track viewing behaviour.","presto-player"),checked:null==T?void 0:T.nocookie,onChange:function(e){return F({nocookie:e})}}),React.createElement(u.TextControl,{label:Object(c.__)("Channel ID","presto-player"),help:React.createElement("div",null,Object(c.__)("Enter the ID of your channel to enable Youtube Subscribe button functionality.","presto-player")," ",React.createElement(u.ExternalLink,{href:"https://support.google.com/youtube/answer/3250431?hl=en"},Object(c.__)("Find my channel id","presto-player"))),value:null==T?void 0:T.channel_id,onChange:function(e){return F({channel_id:e})}})),(null===(y=prestoPlayer)||void 0===y||!y.isPremium||!!(null!==(d=prestoPlayer)&&void 0!==d&&d.proVersion&&Nt(null===(O=prestoPlayer)||void 0===O?void 0:O.proVersion,"0.9.0")>=0))&&React.createElement(ee,{hideSaveButton:!0,title:Object(c.__)("Email Capture","presto-player"),description:Object(c.__)("Integrate Presto Player with an email provider for email capture.","presto-player"),disabled:I()},React.createElement(yt,null),React.createElement(Ot,null),React.createElement(ft,null),React.createElement(ht,null),(null===(e=prestoPlayer)||void 0===e?void 0:e.proVersion)&&Nt(null===(t=prestoPlayer)||void 0===t?void 0:t.proVersion,"1.2.0")>=0&&React.createElement(St,null),React.createElement(Ue,null)),null!==(r=window)&&void 0!==r&&null!==(o=r.prestoPlayer)&&void 0!==o&&null!==(l=o.isSetup)&&void 0!==l&&l.bunny?React.createElement(React.Fragment,null,React.createElement(ee,{title:Object(c.__)("Bunny.net Settings","presto-player"),description:Object(c.__)("Modify bunny.net settings.","presto-player")},!(null===(i=window)||void 0===i||null===(p=i.prestoPlayer)||void 0===p||null===(b=p.isSetup)||void 0===b||null===(m=b.bunny)||void 0===m||!m.stream)&&React.createElement(n.Fragment,null,React.createElement(u.TextControl,{label:Object(c.__)("Initial Quality Level","presto-player"),help:Object(c.__)("You can set the default quality start level for all streams (i.e. 240, 360, 480, 720, 1080, etc). Set this lower to prevent initial buffering if your users have slow connections. Set this higher to start with a higher quality stream.","presto-player"),placeholder:"480",type:"number",value:null==E?void 0:E.hls_start_level,onChange:function(e){return w({hls_start_level:e})}}),React.createElement("br",null),React.createElement(u.ToggleControl,{label:Object(c.__)("Disable Classic Bunny.net Storage","presto-player"),help:Object(c.__)("This will disable Bunny.net classic storage in your block UI.","presto-player"),checked:null==E?void 0:E.disable_legacy_storage,onChange:function(e){return w({disable_legacy_storage:e})}}),React.createElement("br",null)),React.createElement(u.ToggleControl,{label:Object(c.__)("Edit Bunny.net Settings","presto-player"),help:Object(c.__)("Edit Bunny.net connection settings. Only edit this if you know what you're doing.","presto-player"),checked:v,onChange:h}),!!v&&React.createElement(React.Fragment,null,React.createElement(ke,null),React.createElement(he,null)))):React.createElement(ee,null,React.createElement(ze,{className:"presto-player__setting--bunny-cta",option:{name:Object(c.__)("Bunny.net Video","presto-player"),help:Object(c.__)("To get started with Bunny.net, add a Bunny.net video to your page.","presto-player"),type:"cta",button:{text:"Learn More",link:"https://prestoplayer.com/secure-video-with-bunny-net",target:"_blank"}}})))};var Bt=function(){var e,t,r,i,m,y,d,O=Object(o.useDispatch)(b.store),_=O.createSuccessNotice,f=O.createErrorNotice,v=Object(n.useState)(!1),h=Object(s.a)(v,2),j=h[0],g=h[1];window.onhashchange=function(){window.scrollTo(0,0)};var E=W().save,R=function(){var e=Object(l.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E();case 3:_(Object(c.__)("Settings Updated","presto-player"),{type:"snackbar"}),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0),f((null===e.t0||void 0===e.t0?void 0:e.t0.message)||Object(c.__)("Something went wrong","presto-player"),{type:"snackbar"});case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),w=Object(o.useSelect)((function(e){var t,r,n,o=["root","site"];return(t=e(a.store)).getEntityRecords.apply(t,o),!(null!==(r=e(a.store))&&void 0!==r&&null!==(n=r.hasFinishedResolution)&&void 0!==n&&n.call(r,"getEntityRecords",o))}));return Object(n.useEffect)((function(){w||g(!0)}),[w]),j?React.createElement("div",{className:"presto-settings"},React.createElement(I,{routes:A,defaultRoute:null==A||null===(e=A.general)||void 0===e?void 0:e.path},React.createElement(u.Card,{className:"presto-settings__navigation"},React.createElement(u.Flex,null,React.createElement(u.FlexBlock,null,React.createElement("div",{role:"tablist","aria-orientation":"horizontal",className:"components-tab-panel__tabs"},React.createElement(B,{to:null==A||null===(t=A.general)||void 0===t?void 0:t.path,type:"button",role:"tab",activeClassName:"is-active",className:"components-button components-tab-panel__tabs-item presto-player__nav-general"},Object(c.__)("General","presto-player")),React.createElement(B,{to:null==A||null===(r=A.integrations)||void 0===r?void 0:r.path,type:"button",role:"tab",activeClassName:"is-active",className:"components-button components-tab-panel__tabs-item presto-player__nav-integrations"},Object(c.__)("Integrations","presto-player")),React.createElement(B,{to:null==A||null===(i=A.performance)||void 0===i?void 0:i.path,type:"button",role:"tab",activeClassName:"is-active",className:"components-button components-tab-panel__tabs-item presto-player__nav-performance"},Object(c.__)("Performance","presto-player")))),React.createElement(u.FlexItem,null,React.createElement(U,{onSave:R,style:{marginRight:"8px"}},Object(c.__)("Update Settings","presto-player"))))),React.createElement(S,{path:null==A||null===(m=A.general)||void 0===m?void 0:m.path},React.createElement(ye,null)),React.createElement(S,{path:null==A||null===(y=A.integrations)||void 0===y?void 0:y.path},React.createElement(Tt,null)),React.createElement(S,{path:null==A||null===(d=A.performance)||void 0===d?void 0:d.path},React.createElement(_e,null))),React.createElement(q,{className:"presto-settings-page-notices"})):React.createElement("div",{className:"presto-settings__loading"},React.createElement(u.Spinner,null))};Object(n.render)(React.createElement(Bt,null),document.getElementById("presto-settings-page"))},7:function(e,t){e.exports=window.wp.data},8:function(e,t){e.exports=window.wp.element}},[[35,1,2]]]);
//# sourceMappingURL=admin-8ab815a4.js.map